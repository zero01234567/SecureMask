<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecureMask Pro - ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰åŒ¿ååŒ–ãƒ„ãƒ¼ãƒ«</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="app-header">
        <h1>ğŸ›¡ï¸ SecureMask Pro</h1>
        <p>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®æ©Ÿå¯†è¦ç´ ã‚’å®Œå…¨åŒ¿ååŒ–</p>
    </header>

    <main class="main-panel">
        <section>
            <h2>ğŸ“¥ å…¥åŠ›ã‚³ãƒ¼ãƒ‰</h2>
            <textarea id="sourceInput" class="code-box"></textarea>
            <br>
            <select id="langSelect" class="mask-btn">
                <option value="Java">Java</option>
                <option value="Python">Python</option>
                <option value="JavaScript">JavaScript</option>
            </select>
            <button id="executeBtn" class="mask-btn">ğŸš€ åŒ¿ååŒ–å®Ÿè¡Œ</button>
        </section>

        <section class="result-section">
            <h2>ğŸ“¤ åŒ¿ååŒ–çµæœ</h2>
            <textarea id="outputResult" class="code-box" readonly></textarea>
        </section>

        <div id="errorDisplay" class="error-alert"></div>
    </main>

    <script src="SecureMaskEngine.js"></script>
    <script>
        class SecureMaskApp {
            constructor() {
                this.engine = new SecureMaskEngine();
                this.bindEvents();
            }

            bindEvents() {
                document.getElementById('executeBtn').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.process();
                });
            }

            process() {
                try {
                    const sourceCode = document.getElementById('sourceInput').value.trim();
                    if (!sourceCode) throw new Error("å…¥åŠ›ã‚³ãƒ¼ãƒ‰ãŒç©ºã§ã™");

                    const lang = document.getElementById('langSelect').value;
                    const result = this.engine.mask(sourceCode, lang);

                    document.getElementById('outputResult').value = result;
                    document.getElementById('errorDisplay').style.display = "none";

                } catch (error) {
                    const errorBox = document.getElementById('errorDisplay');
                    errorBox.textContent = `âš ï¸ ã‚¨ãƒ©ãƒ¼: ${error.message}`;
                    errorBox.style.display = "block";
                    console.error(`å‡¦ç†å¤±æ•—: ${error.stack}`);
                }
            }
        }

        new SecureMaskApp();
    </script>
</body>
</html>
